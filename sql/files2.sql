/*
 Navicat Premium Data Transfer

 Source Server         : local mysql
 Source Server Type    : MySQL
 Source Server Version : 50515
 Source Host           : localhost
 Source Database       : files

 Target Server Type    : MySQL
 Target Server Version : 50515
 File Encoding         : utf-8

 Date: 02/08/2013 02:38:13 AM
*/

SET NAMES utf8;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
--  Table structure for `files`
-- ----------------------------
DROP TABLE IF EXISTS `files`;
CREATE TABLE `files` (
  `vol_id` char(8) COLLATE utf8_bin NOT NULL,
  `folder_id` int(11) DEFAULT NULL,
  `file_name` varchar(255) COLLATE utf8_bin NOT NULL,
  `file_id` int(11) NOT NULL,
  `file_size` bigint(20) NOT NULL,
  `file_create_date` datetime NOT NULL,
  `file_mod_date` datetime NOT NULL,
  UNIQUE KEY `vol_folder_file_mod_date` (`vol_id`,`folder_id`,`file_name`,`file_mod_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;
delimiter ;;
CREATE TRIGGER `trigger_before_insert_files` BEFORE INSERT ON `files` FOR EACH ROW BEGIN 

	/* custom "auto" identity column: vol0001 */
	/* eg,	vol0167  Acapulco H.E.A.T. One                                        
			vol0165  Action Man • WitchBlade       */

	IF NEW.vol_id NOT RLIKE "vol[0-9][0-9][0-9][0-9]" then
		SET NEW.vol_id = concat( 'vol' ,  substr( concat( '0000' , 1 + ifnull( (select max(substr(vol_id,-4)) from files) , 0) ) , -4 ) ) ;  
	END if;

	
	set @vol_id = (select files.vol_id from files where files.vol_id = new.vol_id and files.folder_id = 1) ;  

END;
 ;;
delimiter ;

-- ----------------------------
--  Records of `files`
-- ----------------------------
BEGIN;
INSERT INTO `files` VALUES ('vol0001', '1', 'Genie', '2', '0', '2011-07-02 21:02:54', '2013-01-16 06:51:12'), ('vol0001', '2', 'Users', '48946', '0', '2011-06-24 21:49:24', '2011-09-02 18:36:34'), ('vol0001', '48946', 'donb', '328394', '0', '2011-09-02 18:36:34', '2013-01-22 07:00:39'), ('vol0001', '328394', 'projects', '541309', '0', '2011-09-06 02:30:45', '2013-01-19 09:26:32'), ('vol0001', '541309', 'lsdb', '22755950', '0', '2007-10-30 05:49:13', '2012-09-12 22:05:32'), ('vol0001', '22755950', 'tests', '22756449', '0', '2009-01-24 08:49:20', '2012-07-19 04:44:04'), ('vol0001', '22756449', 'unicode filename test', '22756468', '0', '2007-01-02 16:55:04', '2009-02-04 03:30:32'), ('vol0001', '22756468', 'Adobe® Pro Fonts', '22756470', '13', '2007-01-02 13:18:08', '2007-01-02 13:18:08'), ('vol0002', '1', 'Dunharrow', '2', '0', '2012-10-03 00:52:17', '2013-01-17 14:06:08'), ('vol0002', '2', 'pdf', '75686', '0', '2012-11-29 23:29:38', '2012-12-21 22:37:25'), ('vol0002', '75686', 'Xcode 4 Unleashed 2nd ed. - F. Anderson (Sams, 2012) WW.pdf', '75756', '19591553', '2012-11-01 14:43:39', '2012-11-01 14:43:39'), ('vol0003', '1', 'Roma', '2', '0', '2011-09-07 02:57:33', '2013-01-16 03:41:36'), ('vol0003', '2', 'Movies', '319', '0', '2011-09-07 04:41:21', '2012-12-15 09:14:52'), ('vol0003', '319', 'Tron Legacy (2010) (1080p).mkv', '62629', '14016377779', '2011-09-13 22:23:06', '2012-01-20 18:03:01'), ('vol0001', '48946', 'donb', '328394', '0', '2011-09-02 18:36:34', '2013-01-23 14:58:35'), ('vol0004', '1', 'Brandywine', '2', '0', '2011-02-27 07:11:05', '2012-12-26 02:50:31'), ('vol0004', '2', 'erin esurance', '272101', '0', '2008-01-24 14:01:21', '2009-07-10 05:40:24'), ('vol0005', '1', 'Taos', '2', '0', '2012-10-08 14:25:27', '2012-12-23 17:24:25'), ('vol0005', '2', 'TV series', '91', '0', '2012-01-12 18:45:01', '2013-01-13 08:13:27'), ('vol0005', '91', 'Tron Uprising', '408', '0', '2012-06-22 07:43:24', '2012-11-03 09:30:50'), ('vol0005', '408', 'Season 01', '410', '0', '2012-06-22 07:43:41', '2012-07-07 14:44:23'), ('vol0005', '410', 'Tron Uprising - 1x01 - The Renegade (1).mkv', '411', '1092800800', '2012-06-22 07:43:41', '2012-06-22 07:45:11'), ('vol0001', '48946', 'donb', '328394', '0', '2011-09-02 18:36:34', '2013-01-23 21:02:24'), ('vol0001', '541309', 'files', '40014149', '0', '2013-01-19 09:26:32', '2013-01-23 17:50:46'), ('vol0001', '40014149', 'files.py', '40442383', '15561', '2013-01-22 10:11:17', '2013-01-23 21:08:33'), ('vol0001', '40014149', 'do_mysql.py', '40415987', '1287', '2013-01-22 06:33:05', '2013-01-22 14:22:17'), ('vol0006', '1', 'Ulysses', '2', '0', '2012-12-14 08:04:59', '2013-01-21 06:52:52'), ('vol0006', '2', 'TV Shows', '458', '0', '2012-12-15 13:00:43', '2013-01-17 07:06:20'), ('vol0006', '458', 'Nikita', '399', '0', '2010-11-25 09:54:58', '2012-12-15 13:13:43'), ('vol0006', '399', 'S01', '463', '0', '2012-12-15 13:13:20', '2012-12-15 13:13:43'), ('vol0006', '463', 'Nikita - 1x01 - Pilot.avi', '402', '366687484', '2010-09-10 05:03:02', '2010-09-10 06:37:47'), ('vol0001', '48946', 'donb', '328394', '0', '2011-09-02 18:36:34', '2013-01-24 04:52:32'), ('vol0001', '541309', 'files', '40014149', '0', '2013-01-19 09:26:32', '2013-01-24 07:27:41'), ('vol0001', '40014149', 'module_attributes.py', '40464485', '7559', '2013-01-22 14:21:17', '2013-01-24 07:22:17'), ('vol0001', '328394', 'Documents', '328395', '0', '2011-07-02 21:06:26', '2013-01-24 10:59:57'), ('vol0001', '328395', 'Formatting for Machines- Controlled Environment Needed.rtfd', '40669328', '0', '2013-01-24 10:59:57', '2013-01-24 10:59:57'), ('vol0001', '48946', 'donb', '328394', '0', '2011-09-02 18:36:34', '2013-01-31 23:35:15'), ('vol0001', '328394', 'projects', '541309', '0', '2011-09-06 02:30:45', '2013-01-31 00:00:43'), ('vol0001', '541309', 'lsdb', '40014149', '0', '2013-01-19 09:26:32', '2013-01-31 23:35:15'), ('vol0001', '40014149', 'lsdb', '41285570', '0', '2013-01-31 20:43:23', '2013-01-31 23:40:33'), ('vol0001', '48946', 'donb', '328394', '0', '2011-09-02 18:36:34', '2013-01-31 23:55:45'), ('vol0001', '541309', 'lsdb', '40014149', '0', '2013-01-19 09:26:32', '2013-01-31 23:56:08'), ('vol0001', '541309', 'lsdb', '40014149', '0', '2013-01-19 09:26:32', '2013-02-01 00:05:56'), ('vol0007', '1', 'Sapporo', '2', '0', '2012-10-03 15:45:12', '2012-12-17 11:04:41'), ('vol0007', '2', 'TV Show', '37827', '0', '2012-10-05 13:39:57', '2012-12-17 13:23:05'), ('vol0007', '37827', 'Winx Club', '3568', '0', '2012-10-03 19:44:04', '2012-12-17 13:23:05'), ('vol0007', '3568', 'S01', '40852', '0', '2012-07-05 10:01:43', '2012-07-15 23:47:54'), ('vol0007', '40852', 'Winx Club - 1x07 - Grounded (aka Friends in Need).avi', '40861', '184436736', '2012-07-05 11:52:26', '2012-07-07 10:22:47'), ('vol0006', '458', 'Lost Girl', '832', '0', '2011-09-28 04:46:52', '2013-01-07 04:11:36'), ('vol0006', '832', 'S03', '1538', '0', '2013-01-07 04:11:36', '2013-01-28 04:03:09'), ('vol0006', '1538', 'Lost Girl - 3x04 - Fae-de To Black.mkv', '1839', '910630059', '2013-01-28 04:03:09', '2013-01-28 04:03:33'), ('vol0001', '48946', 'donb', '328394', '0', '2011-09-02 18:36:34', '2013-02-01 02:49:51'), ('vol0008', '1', 'Saratoga', '2', '0', '2012-07-05 19:53:24', '2013-01-23 07:40:12'), ('vol0008', '2', 'TV Series', '206', '0', '2012-07-05 20:26:28', '2013-01-17 07:11:11'), ('vol0008', '206', 'Sanctuary', '618', '0', '2008-12-27 03:40:51', '2012-07-05 23:30:13'), ('vol0008', '618', 'S03', '638', '0', '2010-11-25 07:55:55', '2012-01-05 02:56:45'), ('vol0008', '638', 'Sanctuary - 3x20 - Into the Black.mkv', '659', '1128647847', '2011-10-26 05:53:48', '2011-10-27 07:18:02'), ('vol0008', '638', 'Sanctuary - 3x10 - Hollow Men.avi', '649', '367472506', '2010-12-20 07:40:26', '2010-12-20 07:40:46'), ('vol0001', '328394', 'adobe-master-cs4-keygen.exe', '813678', '94208', '2008-10-20 16:43:20', '2008-10-20 16:43:20'), ('vol0001', '328394', 'Adventures of Buckaroo Banzai Across the Eighth Dimension, The Script at IMSDb..html', '39769678', '177126', '2013-01-16 10:31:51', '2013-01-16 10:31:51'), ('vol0001', '328394', 'Aiko.rar', '967779', '157533195', '2011-09-25 00:01:18', '2011-09-25 00:01:41'), ('vol0001', '328394', 'applications.svg', '621214', '7849', '2011-09-09 21:18:37', '2011-09-09 21:18:37'), ('vol0001', '328394', 'Avengers vs. X-Men 07 (of 12) (2012) (6 Covers) (noads) (Minutemen-Meganubis).cbr', '26701244', '41021599', '2012-07-18 05:09:19', '2012-07-18 05:09:20'), ('vol0001', '328394', 'Binary Domain Gameplay Preview.mp4', '10311732', '19245276', '2012-03-08 05:38:50', '2012-03-08 05:39:54'), ('vol0001', '328394', 'Blooms_rose.svg', '2772053', '630280', '2012-01-04 05:37:26', '2012-01-04 05:37:26'), ('vol0001', '328394', 'Blooms_roses.svg', '3307481', '630280', '2012-01-08 19:22:09', '2012-01-08 19:22:09'), ('vol0001', '328394', 'Bristow-Flight-Instructors.xls', '31516932', '28672', '2012-11-14 06:06:22', '2012-11-14 06:06:22'), ('vol0001', '328394', 'Catherine Video Review.mp4', '10311926', '18609279', '2011-11-02 15:55:20', '2011-11-02 15:59:03'), ('vol0001', '328394', 'CCC Error Report.cccerrors', '21098990', '3919', '2012-06-18 05:44:55', '2012-06-18 05:44:55'), ('vol0001', '328394', 'Confirm - Super User.html', '35915526', '19459', '2012-12-19 22:15:22', '2012-12-19 22:15:22'), ('vol0001', '328394', 'Continuum_body_deformation.svg', '23980950', '158616', '2012-08-06 08:31:07', '2012-08-06 08:31:07'), ('vol0001', '328394', 'Coriolis Systems : My Account : View Invoice.html', '26968810', '10320', '2012-10-03 16:12:09', '2012-10-03 16:12:09'), ('vol0001', '328394', 'Do Find Contents or Container.applescript', '22305128', '8953', '2011-06-21 10:29:40', '2011-06-21 10:29:40'), ('vol0001', '328394', 'drawing.svg', '610092', '2423', '2011-09-09 19:35:13', '2011-09-09 19:35:13'), ('vol0001', '328394', 'dstruct.py', '1925120', '10418', '2011-11-27 23:32:49', '2011-11-27 23:32:49'), ('vol0001', '328394', 'eXistenZ Script at IMSDb..html', '39769853', '206944', '2013-01-16 10:33:20', '2013-01-16 10:33:20'), ('vol0001', '328394', 'files.db.sql', '23042310', '61505', '2012-07-18 19:17:17', '2012-07-18 19:17:17'), ('vol0001', '328394', 'Finder - Move To Folder.scpt', '22305127', '34096', '2009-11-21 08:34:42', '2011-06-22 06:08:42'), ('vol0001', '328394', 'Fly Away With Me Againby PaleDeth.xm', '1444107', '24816', '2011-11-05 18:52:45', '2011-11-05 18:52:45'), ('vol0001', '328394', 'Google Accounts.html', '35915445', '6640', '2012-12-19 22:14:57', '2012-12-19 22:14:57'), ('vol0001', '328394', 'GreyscaleGorilla HDRI Light Kit Pro (1.5).torrent', '1087390', '36359', '2011-10-14 04:05:47', '2011-10-14 04:05:47'), ('vol0001', '328394', 'Higher Earth 002 (2012) (three covers) (Digital) (Spyder-Empire).cbz', '26701214', '29646483', '2012-08-04 06:31:17', '2012-08-04 06:31:18'), ('vol0001', '328394', 'Higher Earth 003 (2012) (Digital) (Fawkes-Empire).cbr', '26701215', '22120178', '2012-08-04 06:31:18', '2012-08-04 06:31:18'), ('vol0001', '328394', 'Higher Earth 02 (2012) (2 Covers) (Tarutaru-DCP).cbr', '26701213', '27149325', '2012-07-18 05:09:38', '2012-07-18 05:09:40'), ('vol0001', '328394', 'Higher Earth 02 (2012) (2 Covers) (Tarutaru-DCP-HD).cbr', '26701211', '44318747', '2012-07-18 05:09:40', '2012-07-18 05:09:41'), ('vol0001', '328394', 'id_rsa.pub', '686306', '400', '2011-09-14 16:32:39', '2011-09-14 16:32:39'), ('vol0001', '328394', 'imagineer_log.txt', '19163809', '23466', '2012-06-09 01:38:57', '2012-06-09 19:07:41'), ('vol0001', '328394', 'import {theFolderAliasToImport} by referencing .scpt', '2999739', '5711', '2011-11-23 05:44:55', '2011-12-23 21:11:11'), ('vol0001', '328394', 'Invisible Watermarking for Digital Cinema (Kodak Research).webarchive', '17823827', '68003', '2010-10-20 06:06:48', '2010-10-20 06:06:48'), ('vol0001', '328394', 'io9_2622.mp4', '7053280', '12056647', '2012-02-29 00:55:20', '2012-02-29 00:55:37'), ('vol0001', '328394', 'Kind is Aperture Library.savedSearch', '4102117', '6838', '2012-01-19 22:08:28', '2012-01-19 22:08:28'), ('vol0001', '328394', 'libaio-0.3.105-2.x86_64.rpm', '682835', '18818', '2011-09-14 02:56:38', '2011-09-14 02:56:40'), ('vol0001', '328394', 'libaio-devel-0.3.105-2.x86_64.rpm', '682848', '10339', '2011-09-14 02:56:45', '2011-09-14 02:56:44'), ('vol0001', '328394', 'machine_names.txt', '21813662', '353216', '1970-01-01 00:00:00', '2005-12-17 15:45:49'), ('vol0001', '328394', 'macports.ports.txt', '1539503', '805877', '2011-11-07 05:00:07', '2011-11-07 05:00:07'), ('vol0001', '328394', 'Marketing_Metrics_Continuum.svg', '23980958', '165858', '2012-08-06 08:31:14', '2012-08-06 08:31:14'), ('vol0001', '328394', 'My Notes.enex', '17955485', '89883', '2012-05-30 16:52:47', '2012-05-30 16:52:47'), ('vol0001', '328394', 'parallels.log', '496312', '2789537', '2011-09-02 23:04:11', '2011-09-19 22:27:11'), ('vol0001', '328394', 'payment of $30.00 USD is complete.  You\'re now going back to Wikimedia Foundation, Inc...html', '35070371', '11520', '2012-12-15 07:44:17', '2012-12-15 07:44:17'), ('vol0001', '328394', 'pbToAttrString.py', '36394806', '8634', '2012-12-22 18:11:20', '2012-12-22 18:11:20'), ('vol0001', '328394', 'Poser 8 Installer Log File', '2447333', '148794', '2011-09-22 18:52:22', '2011-09-23 19:32:56'), ('vol0001', '328394', 'Realflow5.torrent', '1087393', '37792', '2011-10-14 04:05:47', '2011-10-14 04:05:47'), ('vol0001', '328394', 'runway walk one.daz', '5934225', '2616722', '2012-02-18 03:27:53', '2012-02-18 03:28:13'), ('vol0001', '328394', 'Scott Adams Blog: The Imagination Interface 10:11:2010.webarchive', '17823828', '489276', '2010-10-20 05:59:45', '2010-10-20 05:59:45'), ('vol0001', '328394', 'Secondary_cell_energy_density.svg', '26665081', '28575', '2012-09-29 17:08:41', '2012-09-29 17:08:41'), ('vol0001', '328394', 'Sex, pot and comic books | Cannabis Culture Magazine.webarchive', '17823829', '730660', '2010-10-20 05:49:26', '2010-10-20 05:49:26'), ('vol0001', '328394', 'Shareware is a distribution method, not a type of software..txt', '39592796', '41300', '1993-01-08 04:00:00', '1993-01-08 04:00:00'), ('vol0001', '328394', 'sigplan-angry.eps', '24859013', '86637', '2012-08-17 03:44:01', '2012-08-17 03:44:01'), ('vol0001', '328394', 'Sybase_ASE_LOCALHOST.log', '20339824', '14272', '2012-06-13 01:04:26', '2012-06-13 01:04:26'), ('vol0001', '328394', 'test.brain', '7612783', '4437', '2012-03-09 06:52:38', '2012-03-09 06:53:31'), ('vol0001', '328394', 'test.py', '22797459', '2518', '2012-07-10 21:00:13', '2012-07-10 21:00:13'), ('vol0001', '328394', 'The Difference Between A Developer, A Programmer And A Computer Scientist.webarchive', '17823830', '1030338', '2010-10-20 06:07:35', '2010-10-20 06:07:35'), ('vol0001', '328394', 'The future of Virtual Wolrds.pdf', '40564929', '2107219', '2013-01-23 10:32:28', '2013-01-23 10:32:28'), ('vol0001', '328394', 'TheBodyguard2.txt', '5322887', '42192', '2012-02-12 12:27:08', '2012-02-12 12:27:08'), ('vol0001', '328394', 'three nodes.svg', '671081', '10709', '2011-09-13 18:28:08', '2011-09-13 18:28:08'), ('vol0001', '328394', 'Tiptree, James Jr - The Girl Who Was Plugged In.html', '26881755', '86400', '2012-10-02 21:19:51', '2012-10-02 21:19:51'), ('vol0001', '328394', 'Topics One and Two.svg', '615025', '2089', '2011-09-09 19:43:11', '2011-09-09 19:43:11'), ('vol0001', '328394', 'TransUnion.html', '39205713', '61949', '2013-01-11 08:44:37', '2013-01-11 08:44:37'), ('vol0001', '328394', 'TripDetails.html', '31311568', '63522', '2012-11-12 17:24:57', '2012-11-12 17:24:57'), ('vol0001', '328394', 'Untitled 2.svg', '670984', '6577', '2011-09-13 18:19:03', '2011-09-13 18:19:03'), ('vol0001', '328394', 'Untitled 8.html', '35479296', '791', '2012-12-17 14:11:12', '2012-12-17 14:11:12'), ('vol0001', '328394', 'Untitled.pmd', '37098187', '1326938', '2012-12-26 03:27:54', '2012-12-26 03:30:45'), ('vol0001', '328394', 'Untitled.pz3', '37098556', '4638984', '2012-12-26 03:30:45', '2012-12-26 03:30:46'), ('vol0001', '328394', 'Untitled.scpt', '2389358', '2388', '2011-12-19 09:25:40', '2011-12-23 21:11:27'), ('vol0001', '328394', 'VD_7_Cluster2.svg', '24061365', '40584', '2012-08-08 10:51:03', '2012-08-08 10:51:03'), ('vol0001', '328394', 'Verify Account.html', '38061086', '6380', '2013-01-01 22:55:23', '2013-01-01 22:55:23'), ('vol0001', '328394', 'Virtual Worlds - A New Medium.pdf', '40564964', '142702', '2013-01-23 10:32:54', '2013-01-23 10:32:54'), ('vol0001', '328394', 'vv.pdf.f1.l4.txt', '18829546', '4002', '2012-06-06 23:04:05', '2012-06-06 23:04:05'), ('vol0001', '328394', 'x.sh', '539945', '598', '2011-09-06 01:30:08', '2011-09-06 01:30:08'), ('vol0001', '48946', 'donb', '328394', '0', '2011-09-02 18:36:34', '2013-02-06 04:03:04'), ('vol0001', '541309', 'lsdb', '40014149', '0', '2013-01-19 09:26:32', '2013-02-06 04:03:04'), ('vol0001', '40014149', 'An insert, even against a duplicate key….txt', '41197622', '166', '2013-01-31 00:05:41', '2013-01-31 00:05:41'), ('vol0001', '40014149', 'cnx_mysql.py', '40432066', '1125', '2013-01-22 08:04:14', '2013-01-24 18:35:05'), ('vol0001', '40014149', 'executing (1, \'Genie\', 2, 0,….txt', '40581232', '1430', '2013-01-23 14:30:12', '2013-01-23 14:30:12'), ('vol0001', '40014149', 'Module \'mysql.connector\'.txt', '40415836', '2693', '2013-01-22 06:31:41', '2013-01-24 07:30:49'), ('vol0001', '40014149', 'NSFileAttributes.txt', '40666462', '1397', '2013-01-24 10:21:07', '2013-01-24 10:21:07'), ('vol0001', '40014149', 'README.md', '41194397', '6723', '2013-01-30 23:45:22', '2013-02-01 03:31:17'), ('vol0001', '40014149', 'repeated.py', '40699888', '586', '2013-01-24 18:10:05', '2013-01-24 18:10:05'), ('vol0001', '40014149', 'setup.py', '41285792', '785', '2013-01-31 20:45:39', '2013-01-31 20:45:39'), ('vol0001', '40014149', 'untitled 3.txt', '40416759', '621', '2013-01-22 06:40:16', '2013-01-22 06:40:16'), ('vol0003', '2', 'TV Shows', '7133', '0', '2011-09-12 16:10:56', '2013-02-05 21:11:30'), ('vol0003', '7133', 'Motive', '2763964', '0', '2013-02-05 21:11:30', '2013-02-05 21:53:39'), ('vol0001', '48946', 'donb', '328394', '0', '2011-09-02 18:36:34', '2013-02-06 05:16:37'), ('vol0009', '1', 'Sacramento', '2', '0', '2012-07-05 19:53:31', '2012-12-17 04:05:43'), ('vol0009', '2', 'Movies', '2961', '0', '2012-07-07 16:53:38', '2012-12-17 08:21:35'), ('vol0009', '2961', 'The Dark Knight (2008) (720p).mkv', '3548', '8532032906', '2008-11-21 23:45:10', '2008-11-21 23:45:10');
COMMIT;

SET FOREIGN_KEY_CHECKS = 1;
